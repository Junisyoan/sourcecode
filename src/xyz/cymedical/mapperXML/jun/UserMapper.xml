<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="xyz.cymedical.mapper.jun.UserMapper">
	<select id="queryByLogin" resultType="xyz.cymedical.entity.jun.User" parameterType="xyz.cymedical.entity.jun.User">
		select * from tb_user where account = #{account} and pwd=#{pwd}
	</select>
	
	<select id="queryAccount" parameterType="String" resultType="xyz.cymedical.entity.jun.User">
		select * from tb_user where account  = #{account}
	</select>
	
	<insert id="addUser" parameterType="xyz.cymedical.entity.jun.User">
		insert into tb_user (user_id,account,pwd,age,sex,edu,occu,phone,email,state)
		values(user_seq.nextval,#{account},#{pwd},#{age},#{sex},#{edu},#{occu},#{phone},#{email},'启用')
	</insert>
	
	<select id="queryUserCount" resultType="int">
		select count(*) from tb_user
	</select>
	
	<update id="updateUser" parameterType="xyz.cymedical.entity.jun.User">
		update tb_user set pwd=#{pwd},#{age},#{sex},#{edu},#{occu},#{phone},#{email},#{state} where user_id=#{user_id}
	</update>
	
	<delete id="delUser" parameterType="int">
		delete from tb_user where user_id=#{user_id}
	</delete>
	
	<select id="queryUserList" resultType="xyz.cymedical.entity.jun.User" parameterType="int">
		select * from (select u.*,rownum rn from tb_user u order by user_id)t where t.rn between #{firstRecord} and #{lastRecord}
	</select>
</mapper>