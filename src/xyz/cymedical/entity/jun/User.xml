<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">


<mapper namespace="org.great.mapper.UserMapper">

	<select id="findUserByName" parameterType="org.great.entity.User"
		resultType="org.great.entity.User">
		select * from tb_user where name = #{name} and pwd = #{pwd}
	</select>

	<insert id="addUser" parameterType="org.great.entity.User">
		<selectKey keyProperty="USERID" order="BEFORE" resultType="java.lang.Integer">
			select SEQ_USER.nextval from dual
		</selectKey>
		insert into tb_user (USERID,NAME,PWD,SEX,EDUCATION,JOB,TEL,EMAIL)
		values
		(SEQ_USER.nextval,#{name},#{pwd},#{sex},#{education},#{job},#{tel},#{email})
	</insert>

	<delete id="delUser" parameterType="int">
		delete from tb_User where
		userid=#{id}
	</delete>


	<update id="EnOrDisableUser" parameterType="org.great.entity.User">
		update tb_user set
		state=#{state} where userid=#{userid}
	</update>


	<select id="findUsers" resultType="org.great.entity.User"
		parameterType="org.great.entity.User">

		select * from tb_user where 1 = 1

		<if test="name!=null and name!=''">
			and name like '%${name}%'
		</if>

		<if test="job!=null and job!=''">
			and job=#{job}
		</if>

		<if test="state!=null and state!=''">
			and state=#{state}
		</if>
		
	</select>

	<update id="updateUser" parameterType="org.great.entity.User">
		update tb_user set
		roleid=#{roleid} where userid=#{userid}
	</update>

	<select id="findAll" resultType="org.great.entity.User">
		select * from tb_user
	</select>

	<select id="checkRepeat" resultType="org.great.entity.User">
		select * from tb_user where name=#{name}
	</select>


	<!-- <select id="findById2" parameterType="int" resultType="java.util.HashMap"> -->
	<!-- select -->
	<!-- deptno,dname,loc from dept where deptno=#{id} -->
	<!-- </select> -->

	<!-- <select id="findAll2" resultType="java.util.HashMap"> -->
	<!-- select deptno,dname,loc from -->
	<!-- dept -->
	<!-- </select> -->

	<!-- 批量增加 -->



</mapper> 